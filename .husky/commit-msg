#!/bin/sh

# ì»¤ë°‹ ë©”ì‹œì§€ íŒŒì¼ ê²½ë¡œ
commit_message_file=$1

# ì»¤ë°‹ ë©”ì‹œì§€ ì½ê¸°
commit_message=$(cat "$commit_message_file")

# í—ˆìš©ëœ ì»¤ë°‹ íƒ€ì… ëª©ë¡
allowed_types="feat|fix|docs|refactor|style|design|chore|ci|perf|revert|remove"

# ì»¤ë°‹ ë©”ì‹œì§€ íŒ¨í„´
pattern="^(${allowed_types}) *: *\[#([0-9]+)\] .+"

# ì»¤ë°‹ ë©”ì‹œì§€ ê²€ì¦
if ! echo "$commit_message" | grep -Eiq "$pattern"; then
  echo "ğŸš¨ ì»¤ë°‹ ë©”ì‹œì§€ í˜•ì‹ì´ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤."
  echo "ì˜¬ë°”ë¥¸ í˜•ì‹: type : [#issue_num] commit_message"
  echo "ì˜ˆ: feat: [#1] ë¡œê·¸ì¸ í˜ì´ì§€ UI êµ¬í˜„"
  echo "ê°€ëŠ¥í•œ type: ${allowed_types}"
  exit 1
fi
